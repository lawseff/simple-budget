openapi: 3.1.0
info:
  title: Simple Budget API
  version: CURRENT-SNAPSHOT

servers:
  - url: http://localhost:8080/api
    description: Local server

paths:
  /months/{yearMonth}:
    get:
      summary: Get monthly budget report
      description: Returns a MonthlyReport for the given year-month.
      parameters:
        - name: yearMonth
          in: path
          required: true
          description: Year and month in yyyy-MM format.
          schema:
            type: string
            pattern: "^[0-9]{4}-[0-9]{2}$"
      responses:
        "200":
          description: Monthly report retrieved successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyReport"
  /categories:
    get:
      summary: Get categories
      description: Returns the list of available Categories.
      responses:
        "200":
          description: Categories retrieved successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Category"

components:
  schemas:
    MonetaryValue:
      type: object
      properties:
        amount:
          type: string
          description: Decimal value represented as a string.
        currency:
          type: string
          description: ISO currency code (e.g., "EUR", "USD").
      required: [amount, currency]

    Entry:
      type: object
      properties:
        id:
          type: string
          format: uuid
        money:
          $ref: "#/components/schemas/MonetaryValue"
        date:
          type: string
          format: date
          description: ISO local date (YYYY-MM-DD).
        categoryCode:
          type: string
        comment:
          type: string
      required: [ money, date, categoryCode ]

    BudgetSection:
      type: object
      properties:
        total:
          $ref: "#/components/schemas/MonetaryValue"
        relativeToIncome:
          type: string
        entries:
          type: array
          items:
            $ref: "#/components/schemas/Entry"
      required: [total, entries]

    MonthlyReport:
      type: object
      properties:
        income:
          $ref: "#/components/schemas/BudgetSection"
        needs:
          $ref: "#/components/schemas/BudgetSection"
        wants:
          $ref: "#/components/schemas/BudgetSection"
        savings:
          $ref: "#/components/schemas/BudgetSection"
      required: [income, needs, wants, savings]

    Category:
      type: object
      properties:
        code:
          type: string
        type:
          type: string
          enum: ['INCOME', 'SAVINGS', 'NEEDS', 'WANTS']
      required: [code, type]
